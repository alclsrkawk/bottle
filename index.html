<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>대한민국 최고 주류 쇼핑몰</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <link rel="stylesheet" href="./css/index.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
        integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script defer src="./js/common.js"></script>
    <script src="./js/index.js"></script>
</head>

<body>
    <!-- header-->
    <header data-include-file="./include/main/header.html" class="includeJs"></header>
    <!-- header-->
    <!-- main   -->
    <div class="banner">
        <figure>
            <!-- <img class="active" src="./images/main/main-slide-01.png" alt=""> -->
            <img src="./images/main/main-slide-02.png" alt="">
            <figcaption>
                <div>
                    홀리데이 추천 위스키
                </div>
                <div>
                    글렌피딕 12년 홀리데이 에디션
                </div>
                <div>
                    <progress value="35" max="100"></progress>
                    <img src="./images/main/pause-btn.png">
                </div>
            </figcaption>
        </figure>
    </div>
    <!-- <script>
        const progress = document.querySelector('.range');
        progress.style.cssText = "background: url('./images/main/range.png') repeat-x;  width:40%; "
    </script> -->
    <main>
        <div class="wlist">
            <div class="wine">
                <div class="cate-name">분위기 있는 와인</div>
                <div class="more" onclick="location.href='./pages/list.html?name=wine'">
                    <span>+</span>&nbsp;more
                </div>
                <div class="swiper">
                    <div class="swiper-wrapper">
                        <!-- <figure class="swiper-slide">
                        </figure> -->
                    </div>
                </div>
            </div>
        </div>
    </main>
    <script>

        const getData = (name) => {
            let goods = [], list = '';
            let ellist = document.querySelector(`.${name} .swiper-wrapper`);

            const url = `../datas/${name}_view.json`;
            fetch(url)
                .then(type => type.json())
                .then(result => {
                    goods = result.data;
                    console.log(goods)
                    getList();

                }).catch(error => {
                    console.log(error);
                });

            const getList = () => {
                goods.forEach(function (element, i) {
                    const picture = element.product_img.split(',')[0];
                    // console.log(picture)
                    list += `
                <figure class="swiper-slide">
                    <img src="./images/${name}/${picture.trim()}" alt="">
                    <figcaption>
                        <p>
                            ${element.brand}
                        </p>
                        <p>
                            ${element.product_name}
                        </p>
                        <p>
                            <span> ${element.discount}</span>
                            <span> ${element.price}</span>
                        </p>
                    </figcaption>
                </figure>
                `
                });
                ellist.innerHTML = list;

                list = "";
                let ellink = document.querySelectorAll('figure');
                ellink.forEach(function (element, i) {
                    element.onclick = function () {
                        location.href = `./pages/view.html?idx=${goods[i].Idx}&name=${name}`;
                    }
                })
            }
        }
        getData('wine');
    </script>
    <!-- main   -->
    <!-- footer -->
    <footer data-include-file="./include/main/footer.html" class="includeJs"></footer>
    <!-- footer -->
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script>
        var swiper = new Swiper(".swiper", {
            slidesPerView: 4,
            spaceBetween: 40,
            pagination: {
                el: ".swiper-pagination",
                clickable: true,
            },
        });
    </script>
</body>

</html>